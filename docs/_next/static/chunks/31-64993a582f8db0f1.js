"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[31],{5031:(e,a,n)=>{n.d(a,{O9:()=>f,NK:()=>y,V7:()=>x});var t=n(5155),r=n(2115),o=n(2362);function i(e){let a=e.domain.join("-"),n=e.range.join("-"),i=(0,r.useMemo)(()=>{let a=(0,o.m4Y)().domain(e.domain).range(e.range),n=Math.min(10,Math.floor(Math.abs(e.range[0]-e.range[1])/40));return Array.from(new Set(a.ticks(n).map(e=>Math.round(100*e)/100))).map(e=>({value:e,yOffset:a(e)}))},[a,n]);return(0,t.jsxs)("svg",{children:[(0,t.jsx)("path",{d:["M",70,20,"H",80,"V",e.range[0],"H",70].join(" "),fill:"none",stroke:"white"}),i.map((e,a)=>{let{value:n,yOffset:r}=e;return(0,t.jsxs)("g",{transform:"translate(70, ".concat(r,")"),children:[(0,t.jsx)("line",{x2:"10",stroke:"white"}),(0,t.jsx)("text",{style:{stroke:n<0?"red":"white",fontSize:"15px",textAnchor:"end",transform:"translateX(-5px) translateY(3px)"},children:n.toFixed(2)})]},a)})]})}function s(e){let a=String(e.getMinutes()).padStart(2,"0"),n=String(e.getSeconds()).padStart(2,"0");return"".concat(a,":").concat(n)}function d(e){let a=e.getMilliseconds(),n=new Date(e.getTime());return n.setMilliseconds(0),a>=500&&n.setSeconds(n.getSeconds()+1),n}function l(e){let a=e.domain.map(s).join("-"),n=e.range.join("-"),i=(0,r.useMemo)(()=>{let a=(0,o.w7C)().domain(e.domain).range(e.range),n=Math.min(10,Math.floor(Math.abs(e.range[0]-e.range[1])/60));return Array.from(new Set(a.ticks(n).map(d))).map(e=>({value:e,xOffset:a(e)}))},[a,n]);return(0,t.jsxs)("svg",{y:e.y,children:[(0,t.jsx)("path",{d:["M",e.range[0],6,"v",-6,"H",e.range[1],"v",6].join(" "),fill:"none",stroke:"white"}),i.map((e,a)=>{let{value:n,xOffset:r}=e;return(0,t.jsxs)("g",{transform:"translate(".concat(r,", 0)"),children:[(0,t.jsx)("line",{y2:"6",stroke:"white"}),(0,t.jsx)("text",{style:{stroke:"white",fontSize:"15px",textAnchor:"middle",transform:"translateY(20px)"},children:s(n)})]},a)})]})}function c(e){let a=e.domain.join("-"),n=e.range.join("-"),i=(0,r.useMemo)(()=>{let a=(0,o.m4Y)().domain(e.domain).range(e.range),n=Math.min(10,Math.floor(Math.abs(e.range[0]-e.range[1])/40));return Array.from(new Set(a.ticks(n).map(e=>Math.round(100*e)/100))).sort().map(e=>({value:e,yOffset:a(e)}))},[a,n]);return(0,t.jsxs)("svg",{x:e.left,children:[(0,t.jsx)("path",{d:["M",e.range[1],20,"H",0,"V",e.range[0],"H",10].join(" "),fill:"none",stroke:"white"}),i.map((e,a)=>{let{value:n,yOffset:r}=e;return(0,t.jsxs)("g",{transform:"translate(0, ".concat(r,")"),children:[(0,t.jsx)("line",{x2:"10",stroke:"white"}),(0,t.jsx)("text",{style:{stroke:n<0?"red":"white",fontSize:"15px",textAnchor:"start",transform:"translateX(15px) translateY(3px)"},children:n.toFixed(2)})]},a)})]})}function h(e){let a=(0,o.w7C)().domain(e.timeDomain).range(e.timeRange),n=(0,o.m4Y)().domain(e.domain).range(e.range),r=e.history.map((t,r)=>(function(e,a,n,t){let r=n(new Date(1e3*e[a].secondsSinceStart-500*(0!==a))),o=t(e[a].data),i=t.range()[0]-o,s=n(a===e.length-1?1e3*e[a].secondsSinceStart:1e3*e[a+1].secondsSinceStart-500)-r;return{x:r,y:o,width:s,height:i}})(e.history,r,a,n));return(0,t.jsx)("svg",{children:e.history.map((a,n)=>{let o=r[n];return(0,t.jsx)("rect",{x:o.x,y:o.y,width:o.width,height:o.height,fill:e.color.toString()},n)})})}function m(e){let a=(0,o.w7C)().domain(e.axes.time.domain).range(e.axes.time.range),n=e.axes.secondary?(0,o.m4Y)().domain(e.axes.secondary.domain).range(e.axes.secondary.range):null,i=e.axes.tertiary?(0,o.m4Y)().domain(e.axes.tertiary.domain).range(e.axes.tertiary.range):null,s=e.axes.quaternary?(0,o.m4Y)().domain(e.axes.quaternary.domain).range(e.axes.quaternary.range):null;return(0,t.jsx)("svg",{children:e.history.map((o,d)=>(function(e,a,n,o,i,s,d){var l,c,h,m,u,g;if(0===a)return null;let x=e[a-1];return(0,t.jsxs)(r.Fragment,{children:[i&&void 0!==x.data2&&void 0!==e[a].data2&&(0,t.jsx)("line",{x1:o(new Date(1e3*x.secondsSinceStart)),y1:i(x.data2),x2:o(new Date(1e3*e[a].secondsSinceStart)),y2:i(e[a].data2),stroke:null!=(m=null==(l=n.secondaryColor)?void 0:l.toString())?m:"black",strokeWidth:"2"}),s&&void 0!==x.data3&&void 0!==e[a].data3&&(0,t.jsx)("line",{x1:o(new Date(1e3*x.secondsSinceStart)),y1:s(x.data3),x2:o(new Date(1e3*e[a].secondsSinceStart)),y2:s(e[a].data3),stroke:null!=(u=null==(c=n.secondaryColor)?void 0:c.toString())?u:"black",strokeWidth:"2"}),d&&void 0!==x.data4&&void 0!==e[a].data4&&(0,t.jsx)("line",{x1:o(new Date(1e3*x.secondsSinceStart)),y1:d(x.data4),x2:o(new Date(1e3*e[a].secondsSinceStart)),y2:d(e[a].data4),stroke:null!=(g=null==(h=n.secondaryColor)?void 0:h.toString())?g:"black",strokeWidth:"2"})]},a)})(e.history,d,e.colors,a,n,i,s))})}function u(e){let a=(0,o.w7C)().domain(e.timeDomain).range(e.timeRange),n=(0,o.m4Y)().domain(e.domain).range(e.range),i=e.history.map((t,r)=>(function(e,a,n,t,r){var o,i,s,d,l,c,h,m,u,g,x,y,f,v;let p=n(new Date(1e3*e[a].secondsSinceStart-500*(0!==a))),S=n(new Date((null!=(i=null==(o=e[a+1])?void 0:o.secondsSinceStart)?i:e[a].secondsSinceStart)*1e3-500*(a!==e.length-1)))-p,j=[{x:p,y:t(e[a].data),width:S,height:t.range()[0]-t(e[a].data),color:r.mainColor}];if(void 0!==e[a].data2){let n=t(e[a].data+(null!=(s=e[a].data2)?s:0));j.push({x:p,y:n,width:S,height:t(e[a].data)-n,color:null!=(d=r.secondaryColor)?d:r.mainColor})}if(void 0!==e[a].data3){let n=t(e[a].data+(null!=(l=e[a].data2)?l:0)+(null!=(c=e[a].data3)?c:0)),o=t(e[a].data+(null!=(h=e[a].data2)?h:0));j.push({x:p,y:n,width:S,height:o-n,color:null!=(m=r.tertiaryColor)?m:r.mainColor})}if(void 0!==e[a].data4){let n=t(e[a].data+(null!=(u=e[a].data2)?u:0)+(null!=(g=e[a].data3)?g:0)+(null!=(x=e[a].data4)?x:0)),o=t(e[a].data+(null!=(y=e[a].data2)?y:0)+(null!=(f=e[a].data3)?f:0));j.push({x:p,y:n,width:S,height:o-n,color:null!=(v=r.quaternaryColor)?v:r.mainColor})}return j})(e.history,r,a,n,e.colors));return(0,r.useDebugValue)(i),(0,t.jsx)("svg",{children:i.map((e,a)=>e.map((e,n)=>(0,t.jsx)("rect",{x:e.x,y:e.y,width:e.width,height:e.height,fill:e.color.toString()},"".concat(a,"-").concat(n))))})}function g(e){return e.secondaryGraphType!==x.StackedBar?(0,t.jsxs)("svg",{children:[(0,t.jsx)(h,{history:e.history,color:e.colors.mainColor,timeRange:e.axes.time.range,timeDomain:e.axes.time.domain,range:e.axes.primary.range,domain:e.axes.primary.domain}),e.secondaryGraphType===x.Line?(0,t.jsx)(m,{history:e.history,colors:e.colors,axes:e.axes}):null]}):(0,t.jsx)("svg",{children:(0,t.jsx)(u,{history:e.history,colors:e.colors,timeRange:e.axes.time.range,timeDomain:e.axes.time.domain,range:e.axes.primary.range,domain:e.axes.primary.domain})})}var x=function(e){return e.None="none",e.Line="line",e.StackedBar="stacked-bar",e}({}),y=function(e){return e.None="none",e.data2="data2",e.data3="data3",e.data4="data4",e}({});function f(e){let[a,n]=function(){let e=(0,r.useRef)(null),[a,n]=(0,r.useState)(0),[t,o]=(0,r.useState)(0);return(0,r.useEffect)(()=>{let a=e.current,t=0,r=0,i=new ResizeObserver(e=>{var a;if(!Array.isArray(e)||!e.length)return;let[i,s]=[(a=e[0]).contentRect.width,a.contentRect.height];(i!==t||s!==r)&&(n(i),o(s),t=i,r=s)});if(a)return i.observe(a),()=>{i.unobserve(a)}},[e]),[e,{width:a,height:t}]}(),s="none"!==e.secondaryAxisSource,d=n.height-20-50,h=function(e,a){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],t=(0,o.Xxv)(e,e=>{var a,t,r;return n?e.data+(null!=(a=e.data2)?a:0)+(null!=(t=e.data3)?t:0)+(null!=(r=e.data4)?r:0):e.data});n&&(t[0]=Math.min((0,o.Xxv)(e,e=>e.data)[0],(0,o.Xxv)(e,e=>{var a;return null!=(a=e.data2)?a:1/0})[0],(0,o.Xxv)(e,e=>{var a;return null!=(a=e.data3)?a:1/0})[0],(0,o.Xxv)(e,e=>{var a;return null!=(a=e.data4)?a:1/0})[0]));let r=[(0,o.m4Y)().domain(t).range([a+20,20]).nice()];return void 0===e[0].data2||n||r.push((0,o.m4Y)().domain((0,o.Xxv)(e,e=>{var a;return null!=(a=e.data2)?a:0})).range([a+20,20]).nice()),void 0===e[0].data3||n||r.push((0,o.m4Y)().domain((0,o.Xxv)(e,e=>{var a;return null!=(a=e.data3)?a:0})).range([a+20,20]).nice()),void 0===e[0].data4||n||r.push((0,o.m4Y)().domain((0,o.Xxv)(e,e=>{var a;return null!=(a=e.data4)?a:0})).range([a+20,20]).nice()),r}(e.history,d,"stacked-bar"===e.secondaryGraphType),m=(0,o.w7C)().domain([new Date(1e3*e.history[0].secondsSinceStart),new Date(1e3*e.history[e.history.length-1].secondsSinceStart)]).range([80,n.width-(s?80:20)]),u=(()=>{switch(e.secondaryAxisSource){case"data2":return h[1];case"data3":return h[2];case"data4":return h[3];default:return h[0]}})();return(0,t.jsxs)("div",{className:"flex flex-col overflow-hidden",children:[(0,t.jsx)("h2",{className:"text-gray-500 font-bold text-2xl",children:e.label}),(0,t.jsx)("div",{ref:a,className:"overflow-hidden h-full",children:(0,t.jsxs)("svg",{style:{border:"1px solid gold"},width:n.width,height:n.height,children:[(0,t.jsx)(i,{domain:h[0].domain(),range:h[0].range()}),(0,t.jsx)(l,{width:n.width,height:n.height,domain:m.domain(),range:m.range(),y:h[0].range()[0]}),s?(0,t.jsx)(c,{domain:u.domain(),range:null==u?void 0:u.range(),left:m.range()[1]}):null,(0,t.jsx)(g,{history:e.history,axes:{primary:{domain:h[0].domain(),range:h[0].range()},secondary:h[1]?{domain:u.domain(),range:u.range()}:void 0,tertiary:h[2]?{domain:h[2].domain(),range:h[2].range()}:void 0,quaternary:h[3]?{domain:h[3].domain(),range:h[3].range()}:void 0,time:{domain:m.domain(),range:m.range()}},secondaryGraphType:e.secondaryGraphType,colors:e.color})]})})]})}}}]);